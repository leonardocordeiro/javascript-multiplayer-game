<html>
	<head></head>

	<body>

		<canvas id="jogo" width="600" height="800"></canvas>
		
		<script src="/socket.io/socket.io.js"></script>
		<script>
		  var socket = io();

		  window.addEventListener("keydown", apertouTecla, false);

		  var x = 10, y = 10;

		  function apertouTecla(event) { 
		  	var key = event.keyCode;
		  	
		  	if(key == 65) {
		  		apagar(x, y);
		  		x -= 5;
		  		desenhar(x, y);
		  	} if(key == 68) {
		  		apagar(x, y);
		  		x += 5;
		  		desenhar(x, y);
		  	} if(key == 87) {
		  		apagar(x, y);
		  		y -= 5;
		  		desenhar(x, y);
		  	} if(key == 83) {
		  		apagar(x, y);
		  		y += 5;
		  		desenhar(x, y);
	  		}
		  }

		  var jogo = document.getElementById('jogo');
		  var c = jogo.getContext('2d');

		  c.fillStyle = 'green';

		  function apagar(x, y) {
		  	socket.emit('coordenadas-limpar', {x: x, y: y});

		  	socket.on('coordenadas-limpar', function(coordenadas) {
		  		c.clearRect(coordenadas.x, coordenadas.y, 10, 10);
		  	})
		  	
		  }

		  function desenhar(x, y) {
		  	socket.emit('coordenadas', {x: x, y: y});
		  	socket.on('coordenadas', function(coordenadas) {
		  		c.fillRect(coordenadas.x, coordenadas.y, 10, 10);
		  	})
	  	  }
		  
		  socket.on('connected',function() { 
		  	c.fillRect(10, 10, 10, 10);
	      });
		  
		</script>
		
	</body>
</html>